<!DOCTYPE html>
<html>
<head>
    <title>Offline Sync Test</title>
</head>
<body>
    <h1>Offline Sales Batch Sync Test</h1>
    <button id="testBtn">Test Batch Sync</button>
    <pre id="output"></pre>
    
    <script>
        document.getElementById('testBtn').addEventListener('click', async () => {
            const output = document.getElementById('output');
            output.textContent = 'Testing batch sync....\n';
            
            const testSale = {
                id: 'test-' + Date.now(),
                items: [
                    {
                        product_id: 1,
                        quantity: 2,
                        unit_price: 1.0,
                        discount: 0
                    }
                ],
                payments: [
                    {
                        method: 'cash',
                        amount: 2.5
                    }
                ],
                discount: 0,
                coupon_code: null,
                notes: 'Browser test',
                customer_id: null,
                customer_name: 'Test Customer',
                customer_phone: '555-0000',
                customer_email: 'test@example.com',
                created_at: new Date().toISOString()
            };
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/sales/batch-sync', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6OTk5OTk5OTk5OX0.VK8jTfOkRBgG5Nt7wX9cQ_Jd9qH8pI2nL5mM3kN4oP'
                    },
                    body: JSON.stringify({
                        sales: [testSale]
                    })
                });
                
                output.textContent += `Status: ${response.status}\n`;
                const data = await response.json();
                output.textContent += 'Response:\n' + JSON.stringify(data, null, 2);
                
            } catch (error) {
                output.textContent += `Error: ${error.message}\n${error.stack}`;
            }
        });
    </script>
</body>
</html>
